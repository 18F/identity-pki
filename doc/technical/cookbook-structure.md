# Coobook Structure

This describes the basic layout of our cookbooks.  This was generated by running
`tree -a` against `kitchen/cookbooks/cookbook_example/`.  See that directory for
details.

```
├── .gitignore
├── README.md
```

README to document what this cookbook is for and how to use it, and gitignore.

```
├── Berksfile
```

Berksfile, used by [berkshelf](https://docs.chef.io/berkshelf.html) to download
the cookbook dependencies.  This is used both for [chefspec unit
tests](https://github.com/chefspec/chefspec#berkshelf) and for [test kitchen
integration tests](https://github.com/test-kitchen/test-kitchen)

The current berkshelf version that we use currently does not do transitive
dependencies, which means there may be some duplication between this Berksfile
and Berksfiles that are referencing this cookbook.

```
├── chefignore
```

Tells chef what files to ignore when doing some publishing step, but I'm not
sure.

```
├── Gemfile
```

Contains the gems needed to run the unit and integration tests.  Run `bundle
install` in this directory before running the tests to install these locally.

```
├── .kitchen.yml
```

[Test Kitchen](https://github.com/test-kitchen/test-kitchen) configuration
files.  The `.kitchen.yml` file is configured to use
[ec2](https://github.com/test-kitchen/kitchen-vagrant) as a provisioner.

We could potentially create a separate kitchen.yml file to use
[vagrant](https://github.com/test-kitchen/kitchen-vagrant) as a provisioner,
and set `KITCHEN_YAML=other-kitchen.yml` to choose which one is used.

Run `bundle install && bundle exec kitchen test` to run the ec2 tests.

```
├── metadata.rb
```

Cookbook metadata.  Describes the cookbook version, description, and
dependencies.

```
├── recipes
│   └── default.rb
```

Cookbook recipes.  These are callable using a chef run list.

```
├── spec
│   ├── spec_helper.rb
│   └── unit
│       ├── data_bags
│       │   ├── config
│       │   │   └── app.json
│       │   └── users
│       │       └── test.json
│       ├── environments
│       │   └── unittest.json
│       └── recipes
│           └── default_spec.rb
```

Chefspec unit tests.  Run these by running `bundle install && bundle exec
rspec`.

```
└── test
    └── smoke
        └── default
            └── default_test.rb
```

Inspec tests.  These are run by the test kitchen integration tests after an
instance is set up.
