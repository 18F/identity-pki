#!/bin/bash
set -euo pipefail

# shellcheck source=/dev/null
. "$(dirname "$0")/lib/common.sh"

usage() {
    cat >&2 <<EOM
usage: $(basename "$0") ENVIRONMENT

Print the IDP and app RDS instance endpoints for ENVIRONMENT.
EOM
}

if [ $# -lt 1 ]; then
    usage
    exit 1
fi

env="$1"

run aws rds describe-db-instances  \
    --filters "Name=db-instance-id,Values=login-$env-idp,login-$env" \
    --query DBInstances[*].Endpoint.Address # --output text
