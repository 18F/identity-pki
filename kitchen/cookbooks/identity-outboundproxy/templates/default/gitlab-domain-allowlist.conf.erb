<%= render 'domain-allowlist.conf.erb' %>

gitlab.com
packages.gitlab.com
# XXX https://packages.gitlab.com/gitlab/gitlab-ee/ubuntu/dists/bionic/InRelease redirects to cloudfront
.cloudfront.net

<%= @gitlab_url %>
download.docker.com
.docker.io
.cloudflare.docker.com
mirror.gcr.io
gcr.io
storage.googleapis.com
proxy.golang.org
sum.golang.org
login-gov-<%= node.chef_environment %>-gitlabcache-<%= @aws_account_id %>-<%= @aws_region %>.s3.dualstack.<%= @aws_region %>.amazonaws.com
<%= @aws_account_id %>.dkr.ecr.<%= @aws_region %>.amazonaws.com

# https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-bucket-intro.html
# includes amazon-ecr-credential-helper-releases.s3.us-east-2.amazonaws.com and gitlab dr backup buckets
.s3.us-east-2.amazonaws.com

# CA certificates for RDS
truststore.pki.rds.amazonaws.com

# Kaniko
deb.debian.org
security.debian.org

# GitLab CI
chromedriver.storage.googleapis.com
dl-ssl.google.com
dl.google.com
# ChromeDriver downloads in GitLab CI
edgedl.me.gvt1.com
googlechromelabs.github.io

# for repo mirroring
api.github.com

# to install golang
go.dev

# to allow gitlab runner auto-build-image
registry.gitlab.com

# allow us to download terraform plugins/providers
registry.terraform.io

# allow alpine packages
dl-cdn.alpinelinux.org

# deploying test applications to cloud.gov
cli.run.pivotal.io
api.fr.cloud.gov

# allow gitlab to report license info to gitlab
version.gitlab.com

# allow gitlab to obtain license info from gitlab
customers.gitlab.com

# allow the public ECR
public.ecr.aws
